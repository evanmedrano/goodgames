<div class="container">
  <h2>Pending friend requests</h2>

  <% @friend_requests.each do |request| %>
    <% if current_user.sent_friend_request_to?(request.friend.id) %>
      <span>
        Friend request sent to <%= link_to(
          request.friend.name,
          user_library_path(request.friend.id),
          class: "text--blue",
        ) %> is still pending
      </span>
    <% else %>
      <span>
        Friend request from <%= link_to(
          request.friend.name,
          user_library_path(request.friend.id),
          class: "text--blue",
        ) %>
      </span>
      <%= button_to(
        "Accept",
        friendships_path(
          friendship: { user_id: current_user.id, friend_id: request.friend.id }
          ),
        class: "button button--yellow",
      ) %>
    <% end %>

    <%= button_to(
      "Delete",
      friendship_path(request.friend.id),
      method: :delete,
      data: { confirm: "Are you sure you want to delete this request?" },
      class: "button button--red",
    ) %>
  <% end %>
</div>
